var updateFromLocal=function(statsData){var request;(request=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){var resp,trim;if(4==request.readyState)if(200==request.status){if("OK"==request.response.replace(/^\s+|\s+$/gim,""))for(var i in statsData)localStorage.removeItem(i)}else console.log(request.status)};var fdata=new FormData;fdata.append("action","logFromLocal"),fdata.append("ticket",userTicket),fdata.append("data",JSON.stringify(data)),request.open("POST","/pages/user/local-stats.php",!0),request.send(fdata)},sendData=!1,data={};if("undefined"!=typeof Storage&&localStorage.hasOwnProperty("pages")&&(pages=JSON.parse(localStorage.pages||!1)||!1)){var firstSet=new Date(pages.first),timeSinceFirst=((new Date).getTime()-firstSet.getTime())/1e3;(timeSinceFirst>180||"undefined"!=typeof lsForceUp)&&(delete pages.first,delete pages.last,data.pages=pages,sendData=!0)}sendData&&updateFromLocal(data);